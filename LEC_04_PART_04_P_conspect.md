# Визуализация данных: гистограммы и столбичатые диаграммы

## Инструменты визуализации

Для визуализации данных можно использовать различные инструменты. В данном случае мы рассмотрим использование библиотеки для визуализации, которая интегрирована с *pandas*.

### Гистограмма для количественных переменных

Гистограмма позволяет визуализировать распределение количественной переменной. Для построения гистограммы можно использовать метод `hist`.

![](images/LEC_04_PART_04_P/000040s_top_6.jpg)

```mermaid
flowchart LR
    A[Данные] --> B[Метод hist] --> C[Гистограмма]
```

По умолчанию гистограмма строится с 10 отрезками. Высота столбика определяется количеством записей, попадающих в каждый отрезок.

Можно регулировать количество отрезков, указав параметр `bins`. Например, можно указать `bins=20`, чтобы разбить переменную на большее количество отрезков.

![](images/LEC_04_PART_04_P/000080s_top_5.jpg)

### Столбичатая диаграмма для категориальных переменных

Для категориальных переменных можно использовать столбичатую диаграмму. Перед построением диаграммы необходимо сгруппировать данные по категориям.

![](images/LEC_04_PART_04_P/000100s_top_2.jpg)

```mermaid
flowchart LR
    A[Данные] --> B[Группировка по категориям] --> C[Метод plot с kind='bar'] --> D[Столбичатая диаграмма]
```

Для построения диаграммы можно использовать функцию `plot` с параметром `kind='bar'`.

![](images/LEC_04_PART_04_P/000120s_top_3.jpg)

Столбичатая диаграмма позволяет увидеть распределение категорий. Например, можно увидеть, что прохладных дней было больше всего, хороших дней — на втором месте и так далее.

![](images/LEC_04_PART_04_P/000149s_top_4.jpg)

## Группировка данных

Иногда может потребоваться создать частотную таблицу с группировкой по определённому признаку. В этом случае можно использовать метод `groupby` и `size`.

```mermaid
flowchart LR
    A[Данные] --> B[Метод groupby] --> C[Метод size] --> D[Частотная таблица]
```

При группировке данных важно учитывать порядок категорий. По умолчанию категории идут в алфавитном порядке, но можно отсортировать их по частоте встречаемости.

## Составные диаграммы

Можно создать составную диаграмму, где каждый столбик будет представлять собой сумму нескольких категорий. Для этого необходимо предварительно переформатировать данные в длинную таблицу Лилон-Тейпл.

```mermaid
flowchart LR
    A[Данные] --> B[Переформатирование в длинную таблицу] --> C[Категории как колонки, сезоны как ряды] --> D[Составная диаграмма]
```

В длинной таблице категории становятся колонками, а сезоны — рядами. На пересечении ряда и колонки находится значение, соответствующее количеству записей в данной категории для данного сезона.

![](images/LEC_04_PART_04_P/000279s_top_1.jpg)

После переформатирования данных можно построить составную диаграмму с помощью функции `plot` и параметра `kind='bar'`.

![](images/LEC_04_PART_04_P/000319s_top_7.jpg)